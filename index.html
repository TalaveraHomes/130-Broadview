<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Welcome to Your Talavera Home</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Roboto', sans-serif; margin: 0; padding: 0; background: #fffdf9; color: #1f1f1f; }
    header {
      position: relative; height: 90vh;
      background: url('195410.jpeg') no-repeat center center/cover;
      display: flex; justify-content: center; align-items: center;
      text-align: center; color: white; flex-direction: column;
    }
    header::before { content: ""; position: absolute; inset: 0; background: rgba(0,0,80,.25); }
    header .content { position: relative; z-index: 1; background: rgba(192, 128, 44, 0.6); padding: 1rem 2rem; border-radius: 8px; }
    header a.logo-link { position: absolute; top: 20px; left: 20px; z-index: 2; }
    header img.logo { height: 100px; }

    nav { display: flex; flex-wrap: wrap; justify-content: center; background: #c0802c; isolation: isolate; }
    nav a { color: #fff; text-decoration: none; padding: 1rem; font-weight: bold; transition: background .3s; }
    nav a:hover { background: #000050; }

    .container section { display: none; padding: 2rem; max-width: 1100px; margin: auto; }
    .container section.active { display: block; }
    h2 { color: #000050; margin-top: 0; }
    ul { list-style: none; padding: 0; }
    ul li { padding: .5rem 0; }

    .pdf-frame { width: 100%; height: 80vh; border: none; background: #fff; box-shadow: 0 0 0 1px #eee inset; }

    .contact-links a, .referral-form button {
      display: inline-block; margin: 0.5rem 1rem 0.5rem 0; padding: 0.75rem 1.5rem;
      background: #000050; color: white; text-decoration: none; border-radius: 6px; font-weight: bold;
      transition: background 0.3s; border: 0; cursor: pointer;
    }
    .contact-links a:hover, .referral-form button:hover { background: #c0802c; }

    footer { background: #000050; color: #fff; text-align: center; padding: 1rem; }

    form input, form textarea { width: 100%; padding: 0.75rem; margin-bottom: 1rem; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }

    /* --- Selections gallery styles --- */
    .selections-toolbar { display: flex; gap: .75rem; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; }
    .chip { display: inline-block; padding: .4rem .8rem; border-radius: 999px; border: 1px solid #e0d7c9; background: #fffaf2; font-weight: 700; color: #000050; }
    .muted { color: #5a5a5a; font-size: .95rem; }

    .gallery { display: grid; grid-template-columns: repeat( auto-fit, minmax(220px, 1fr) ); gap: 16px; }
    .card {
      background: #ffffff; border: 1px solid #eee5d9; border-radius: 12px; overflow: hidden;
      box-shadow: 0 2px 12px rgba(0,0,0,.04); display: flex; flex-direction: column;
      transition: transform .2s ease, box-shadow .2s ease;
    }
    .card:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(0,0,0,.06); }
    .thumb { position: relative; width: 100%; height: 160px; background: #f5f2ed; display: flex; align-items: center; justify-content: center; overflow: hidden; }
    .thumb img { width: 100%; height: 100%; object-fit: cover; display: block; }
    /* Hover overlay shows Column B text */
    .thumb .overlay {
      position: absolute; inset: 0;
      background: rgba(0,0,0,.45);
      color: #fff; opacity: 0; transition: opacity .2s ease;
      display: flex; align-items: center; justify-content: center; text-align: center; padding: 10px;
      font-weight: 700; line-height: 1.35;
    }
    .card:hover .overlay { opacity: 1; }
    .placeholder { font-weight: 700; color: #000050; text-transform: uppercase; font-size: 0.95rem; padding: 0 10px; text-align: center; }

    .info { padding: 12px 14px 14px; }
    .title { font-weight: 700; color: #000050; margin: 0 0 6px; }
    .links a { font-size: .92rem; color: #000050; text-decoration: none; border-bottom: 1px dashed #000050; }
    .links a:hover { color: #c0802c; border-bottom-color: #c0802c; }

    .selections-list { margin-top: 1.5rem; border-top: 1px solid #eee5d9; padding-top: 1rem; }
    .selections-list li { padding: .4rem 0; border-bottom: 1px dashed #eee5d9; }
  </style>
</head>
<body>
  <header>
    <a href="./" class="logo-link">
      <img src="Gold_Talavera_Logo.png" alt="Talavera Homes Logo" class="logo">
    </a>
    <div class="content">
      <h1>Welcome to Your New Talavera Home</h1>
      <p>From our family to yours ‚Äî thank you for choosing Talavera Homes. We're honored to have built the place you'll call home.</p>
    </div>
  </header>

  <nav>
    <a href="#handbook" data-section="handbook">Homeowner Handbook</a>
    <a href="https://www.nationalbuildergroup.com/builder/talavera-homes/service/" target="_self" rel="noopener">Service Request</a>
    <a href="#selections" data-section="selections">Home Selections</a>
    <a href="#tips" data-section="tips">Helpful Tips</a>
    <a href="#referral" data-section="referral">Referral Program</a>
    <a href="#contact" data-section="contact">Contact Us</a>
  </nav>

  <div class="container">
    <section id="handbook">
      <h2>Homeowner Handbook</h2>
      <iframe class="pdf-frame" src="Talavera%20Homes%20Homeowner%20Handbook.pdf#view=FitH&toolbar=1&navpanes=0" title="Talavera Homes Homeowner Handbook"></iframe>
      <p style="margin-top:1rem;">Having trouble viewing? <a href="Talavera%20Homes%20Homeowner%20Handbook.pdf">Open the PDF directly</a>.</p>
    </section>

    <section id="referral">
      <h2>Referral Program</h2>
      <form action="mailto:Eric@Talavera-homes.com,Cindystensrudrealtor@gmail.com?subject=Client%20Website%20Referral" method="post" enctype="text/plain" class="referral-form">
        <input type="text" name="Your Name" placeholder="Your Name" required>
        <input type="text" name="Your Address" placeholder="Your Address" required>
        <input type="text" name="Referral Name" placeholder="Referral's Name" required>
        <input type="tel" name="Referral Phone" placeholder="Referral's Phone Number" required>
        <input type="email" name="Referral Email" placeholder="Referral's Email Address" required>
        <textarea name="Referral Details" placeholder="Describe what your referral is looking for in a home and where they are currently looking" rows="5" required></textarea>
        <button type="submit">Submit Referral</button>
      </form>
    </section>

    <section id="selections">
      <h2>Home Selections</h2>
      <div class="selections-toolbar">
        <span class="chip">Your chosen finishes & fixtures</span>
        <span class="muted">Hover a tile to view details from Column B. Click ‚ÄúDetails‚Äù to open Column C.</span>
      </div>

      <div id="selectionsGallery" class="gallery"></div>
      <ul id="selectionsList" class="selections-list"></ul>
      <p class="muted" style="margin-top:1rem;">Images can be <code>.jpg</code> or <code>.png</code> in <code>/selections/</code>; the page will try both automatically.</p>
    </section>

    <section id="tips"><h2>Helpful Tips</h2><p>Coming soon.</p></section>

    <section id="contact">
      <h2>Contact Us</h2>
      <div class="contact-links">
        <a href="tel:2109003353">üìû Call Us</a>
        <a href="sms:2109003353">üí¨ Text Us</a>
        <a href="mailto:service@talavera-homes.com">‚úâÔ∏è Email Us</a>
      </div>
      <p><strong>Phone:</strong> 210-900-3353<br>
         <strong>Text:</strong> 210-900-3353<br>
         <strong>Email:</strong> service@talavera-homes.com</p>
    </section>
  </div>

  <footer>
    &copy; 2025 Talavera Homes. All rights reserved.
  </footer>

  <script>
    // --- Helpers ---
    function showSection(id) {
      document.querySelectorAll('.container section').forEach(s => s.classList.remove('active'));
      const el = document.getElementById(id);
      if (el) el.classList.add('active');
      if (history.pushState) { history.pushState(null, "", "#" + id); }
    }

    function slugify(text) {
      return (text || "")
        .toLowerCase()
        .replace(/&/g, ' and ')
        .replace(/[^a-z0-9]+/g, '-')
        .replace(/-+/g, '-')
        .replace(/^-|-$/g, '');
    }

    function imageHtmlFor(item) {
      // Prefer explicit image path if provided in JSON; otherwise build from Column A name (slug)
      const base = (item.image && item.image.trim()) ? item.image.trim() : `selections/${slugify(item.name)}.jpg`;
      // Try .jpg, then fallback to .png automatically
      const safe = base.endsWith('.jpg') || base.endsWith('.png') ? base : `${base}.jpg`;
      return `
        <img loading="lazy" src="${safe}" alt="${item.name}"
             onerror="if(this.src.endsWith('.jpg')){this.src=this.src.replace('.jpg','.png'); this.onerror=null;}else{this.replaceWith(document.createElement('div')); this.parentElement.querySelector('.overlay').style.opacity=1; this.parentElement.querySelector('.overlay').style.background='rgba(0,0,0,.15)';}">
      `;
    }

    function renderSelections(items) {
      const gallery = document.getElementById('selectionsGallery');
      const list    = document.getElementById('selectionsList');

      gallery.innerHTML = items.map(it => {
        const img = imageHtmlFor(it);
        // Hover overlay uses Column B (note)
        const overlayText = it.note ? it.note : '';
        const details = it.link ? `<a href="${it.link}" target="_blank" rel="noopener">Details</a>` : '';
        return `
          <article class="card">
            <div class="thumb" title="${overlayText.replace(/"/g,'&quot;')}">
              ${img}
              <div class="overlay">${overlayText || 'Details'}</div>
            </div>
            <div class="info">
              <p class="title">${it.name || ''}</p>
              <div class="links">${details}</div>
            </div>
          </article>
        `;
      }).join('');

      // Simple list (Column A + Column B + link)
      list.innerHTML = items.map(it => {
        const b = it.note ? ` ‚Äî ${it.note}` : '';
        const c = it.link ? ` <a href="${it.link}" target="_blank" rel="noopener">(details)</a>` : '';
        return `<li><strong>${it.name || ''}</strong>${b}${c}</li>`;
      }).join('');
    }

    document.addEventListener('DOMContentLoaded', () => {
      const hash = location.hash ? location.hash.substring(1) : null;
      if (hash && document.getElementById(hash)) showSection(hash);
      document.querySelectorAll('a[data-section]').forEach(a => {
        a.addEventListener('click', (e) => { e.preventDefault(); showSection(a.getAttribute('data-section')); });
      });

      // Load names/notes/links from selections_data.json (Column A/B/C), else fall back to defaults
      const DEFAULT_NAMES = [
        "Exterior Paint","Exterior Trim","Interior Paint","Interior Trim","Stain",
        "Carpet","LVP","Wall tile","Backsplash","Appliances",
        "Cabinets","Countertop","Door Hardware","Lighting Fixtures"
      ];
      const DEFAULTS = DEFAULT_NAMES.map(n => ({ name: n, note: "", link: "", image: "" }));

      fetch('selections_data.json?v=' + Date.now())
        .then(r => r.ok ? r.json() : DEFAULTS)
        .then(arr => Array.isArray(arr) ? arr : DEFAULTS)
        .then(renderSelections)
        .catch(() => renderSelections(DEFAULTS));
    });
  </script>
</body>
</html>
